{"version":3,"sources":["assets/js/dynamicAdapt.js"],"names":["DynamicAdapt","type","prototype","init","_this2","_this","оbjects","daClassname","nodes","document","querySelectorAll","i","length","node","dataArray","dataset","da","trim","split","оbject","element","parent","parentNode","destination","querySelector","breakpoint","place","index","indexInParent","push","arraySort","mediaQueries","Array","map","call","item","filter","self","indexOf","_loop","media","mediaSplit","String","matchMedia","window","mediaBreakpoint","оbjectsFilter","addListener","mediaHandler","matches","moveTo","classList","contains","moveBack","add","children","insertAdjacentElement","remove","undefined","array","slice","arr","sort","a","b"],"mappings":"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","file":"dynamicAdapt.ca03d2de.js","sourceRoot":"..\\..\\src","sourcesContent":["\r\n\"use strict\";\r\n\r\nfunction DynamicAdapt(type) {\r\n\tthis.type = type;\r\n}\r\n\r\nDynamicAdapt.prototype.init = function () {\r\n\tconst _this = this;\r\n\t// массив объектов\r\n\tthis.оbjects = [];\r\n\tthis.daClassname = \"_dynamic_adapt_\";\r\n\t// массив DOM-элементов\r\n\tthis.nodes = document.querySelectorAll(\"[data-da]\");\r\n\r\n\t// наполнение оbjects объктами\r\n\tfor (let i = 0; i < this.nodes.length; i++) {\r\n\t\tconst node = this.nodes[i];\r\n\t\tconst data = node.dataset.da.trim();\r\n\t\tconst dataArray = data.split(\",\");\r\n\t\tconst оbject = {};\r\n\t\tоbject.element = node;\r\n\t\tоbject.parent = node.parentNode;\r\n\t\tоbject.destination = document.querySelector(dataArray[0].trim());\r\n\t\tоbject.breakpoint = dataArray[1] ? dataArray[1].trim() : \"767\";\r\n\t\tоbject.place = dataArray[2] ? dataArray[2].trim() : \"last\";\r\n\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\tthis.оbjects.push(оbject);\r\n\t}\r\n\r\n\tthis.arraySort(this.оbjects);\r\n\r\n\t// массив уникальных медиа-запросов\r\n\tthis.mediaQueries = Array.prototype.map.call(this.оbjects, function (item) {\r\n\t\treturn '(' + this.type + \"-width: \" + item.breakpoint + \"px),\" + item.breakpoint;\r\n\t}, this);\r\n\tthis.mediaQueries = Array.prototype.filter.call(this.mediaQueries, function (item, index, self) {\r\n\t\treturn Array.prototype.indexOf.call(self, item) === index;\r\n\t});\r\n\r\n\t// навешивание слушателя на медиа-запрос\r\n\t// и вызов обработчика при первом запуске\r\n\tfor (let i = 0; i < this.mediaQueries.length; i++) {\r\n\t\tconst media = this.mediaQueries[i];\r\n\t\tconst mediaSplit = String.prototype.split.call(media, ',');\r\n\t\tconst matchMedia = window.matchMedia(mediaSplit[0]);\r\n\t\tconst mediaBreakpoint = mediaSplit[1];\r\n\r\n\t\t// массив объектов с подходящим брейкпоинтом\r\n\t\tconst оbjectsFilter = Array.prototype.filter.call(this.оbjects, function (item) {\r\n\t\t\treturn item.breakpoint === mediaBreakpoint;\r\n\t\t});\r\n\t\tmatchMedia.addListener(function () {\r\n\t\t\t_this.mediaHandler(matchMedia, оbjectsFilter);\r\n\t\t});\r\n\t\tthis.mediaHandler(matchMedia, оbjectsFilter);\r\n\t}\r\n};\r\n\r\nDynamicAdapt.prototype.mediaHandler = function (matchMedia, оbjects) {\r\n\tif (matchMedia.matches) {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tоbject.index = this.indexInParent(оbject.parent, оbject.element);\r\n\t\t\tthis.moveTo(оbject.place, оbject.element, оbject.destination);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let i = 0; i < оbjects.length; i++) {\r\n\t\t\tconst оbject = оbjects[i];\r\n\t\t\tif (оbject.element.classList.contains(this.daClassname)) {\r\n\t\t\t\tthis.moveBack(оbject.parent, оbject.element, оbject.index);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Функция перемещения\r\nDynamicAdapt.prototype.moveTo = function (place, element, destination) {\r\n\telement.classList.add(this.daClassname);\r\n\tif (place === 'last' || place >= destination.children.length) {\r\n\t\tdestination.insertAdjacentElement('beforeend', element);\r\n\t\treturn;\r\n\t}\r\n\tif (place === 'first') {\r\n\t\tdestination.insertAdjacentElement('afterbegin', element);\r\n\t\treturn;\r\n\t}\r\n\tdestination.children[place].insertAdjacentElement('beforebegin', element);\r\n}\r\n\r\n// Функция возврата\r\nDynamicAdapt.prototype.moveBack = function (parent, element, index) {\r\n\telement.classList.remove(this.daClassname);\r\n\tif (parent.children[index] !== undefined) {\r\n\t\tparent.children[index].insertAdjacentElement('beforebegin', element);\r\n\t} else {\r\n\t\tparent.insertAdjacentElement('beforeend', element);\r\n\t}\r\n}\r\n\r\n// Функция получения индекса внутри родителя\r\nDynamicAdapt.prototype.indexInParent = function (parent, element) {\r\n\tconst array = Array.prototype.slice.call(parent.children);\r\n\treturn Array.prototype.indexOf.call(array, element);\r\n};\r\n\r\n// Функция сортировки массива по breakpoint и place \r\n// по возрастанию для this.type = min\r\n// по убыванию для this.type = max\r\nDynamicAdapt.prototype.arraySort = function (arr) {\r\n\tif (this.type === \"min\") {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn a.place - b.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn a.breakpoint - b.breakpoint;\r\n\t\t});\r\n\t} else {\r\n\t\tArray.prototype.sort.call(arr, function (a, b) {\r\n\t\t\tif (a.breakpoint === b.breakpoint) {\r\n\t\t\t\tif (a.place === b.place) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"first\" || b.place === \"last\") {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (a.place === \"last\" || b.place === \"first\") {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn b.place - a.place;\r\n\t\t\t}\r\n\r\n\t\t\treturn b.breakpoint - a.breakpoint;\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\nconst da = new DynamicAdapt(\"max\");\r\nda.init();"]}